{"version":3,"sources":["images/phonebook.png","views/HomeView.js","components/Navigation/Navigation.jsx","components/UserMenu/UserMenu.jsx","components/AuthNav/AuthNav.jsx","components/AppBar/AppBar.jsx","components/PrivateRoute/PrivateRoute.jsx","App.js","redux/store.js","index.js","redux/phonebook/contacts-actions.js","components/RegistrationForm/RegistrationForm.module.css","components/AuthNav/AuthNav.module.css","components/Navigation/Navigation.module.css","components/UserMenu/UserMenu.module.css","components/RegistrationForm/RegistrationForm.jsx","App.module.css","views/HomeView.module.css","components/AppBar/AppBar.module.css","redux/phonebook/contacts-reducer.js","redux/auth/auth-operations.js","redux/auth/auth-selectors.js","redux/auth/auth-slice.js"],"names":["HomeView","className","s","home","heading","src","image","alt","width","Navigation","isLoggedIn","useSelector","authSelectors","getIsLoggedIn","navigation","to","link","activeClassName","activeLink","icon","UserMenu","dispatch","useDispatch","email","getUserEmail","userMenu","type","logOutButton","onClick","authOperations","logOut","AuthNav","exact","activeStyle","pageName","AppBar","header","nav","PrivateRoute","children","redirectTo","routeProps","RegisterView","lazy","LoginView","ContactsView","App","isFetchingCurrentUser","getIsFetchingCurrentUser","useEffect","fetchCurrentUser","fallback","color","height","path","restricted","middleware","getDefaultMiddleware","serializableCheck","ignoredActions","FLUSH","REHYDRATE","PAUSE","PERSIST","PURGE","REGISTER","logger","authPersistConfig","key","storage","whitelist","store","configureStore","reducer","auth","persistReducer","authReducer","contacts","contactsReducer","devTools","process","persistor","persistStore","ReactDOM","render","StrictMode","loading","document","getElementById","fetchContactRequest","createAction","fetchContactSuccess","fetchContactError","addContactRequest","addContactSuccess","addContactError","deleteContactRequest","deleteContactSuccess","deleteContactError","updateContactRequest","updateContactSuccess","updateContactError","changeFilter","module","exports","RegistrationForm","useState","name","setName","setEmail","password","setPassword","handleChange","target","value","regError","getRegError","registrationPage","form","method","onSubmit","e","preventDefault","register","label","input","placeholder","onChange","registerButton","Card","bg","text","style","Body","Title","Text","actions","items","createReducer","_","payload","state","filter","contact","id","map","number","error","combineReducers","axios","defaults","baseURL","token","headers","common","Authorization","createAsyncThunk","credentials","thunkAPI","a","post","data","rejectWithValue","message","logIn","getState","persistedToken","get","operations","getUserName","user","getAuthError","authError","authSlice","createSlice","initialState","extraReducers","fulfilled","action","rejected","pending"],"mappings":"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","file":"static/js/main.f432faf5.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/phonebook.b96dcc85.png\";","import s from '../views/HomeView.module.css';\nimport image from '../images/phonebook.png';\n\nexport default function HomeView() {\n    return (\n        <section className={s.home}>\n            <h2 className={s.heading}>Welcome to your most convenient phonebook</h2>\n            <img src={image} alt=\"phonebook\" width=\"300\" />\n        </section>)\n}","import { NavLink } from \"react-router-dom\";\nimport { useSelector } from \"react-redux\";\nimport s from '../Navigation/Navigation.module.css';\nimport { authSelectors } from \"../../redux/auth\";\nimport { AiOutlineRead, AiFillHome } from \"react-icons/ai\";\n\nconst Navigation = () => {\n  const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\n  return (\n    <nav className={s.navigation}>\n      <NavLink to=\"/\" className={s.link} activeClassName={s.activeLink}>\n        <div className={s.icon}><AiFillHome /></div>\n        <span>Home page</span>\n      </NavLink>\n\n      {isLoggedIn && (\n        <NavLink to=\"/contacts\" className={s.link} activeClassName={s.activeLink}>\n          <div className={s.icon}><AiOutlineRead /></div>\n          <span>Contacts page</span>\n        </NavLink>)}\n    </nav>\n  )\n};\n\nexport default Navigation;","import { useSelector, useDispatch } from 'react-redux';\nimport { authSelectors, authOperations } from '../../redux/auth';\nimport s from '../UserMenu/UserMenu.module.css';\nimport { AiOutlineLogout } from \"react-icons/ai\";\n\nconst UserMenu = () => {\n  const dispatch = useDispatch();\n  const email = useSelector(authSelectors.getUserEmail);\n\n  return (\n    <div className={s.userMenu}>\n      <span className={s.email}>{email}</span>\n\n      <button type=\"button\" className={s.logOutButton} onClick={() => dispatch(authOperations.logOut())}>\n\n        <div className={s.icon}><AiOutlineLogout /></div>\n        <p className={s.link}>Log out</p>\n      </button>\n    </div>\n  )\n};\n\nexport default UserMenu;","import React from 'react';\nimport { NavLink } from 'react-router-dom';\nimport s from '../AuthNav/AuthNav.module.css';\nimport { AiOutlineUserAdd, AiOutlineUserSwitch } from \"react-icons/ai\";\n\nexport default function AuthNav() {\n  return (\n    <div>\n      <NavLink to=\"/register\" exact className={s.link} activeStyle={s.activeLink}>\n        <div className={s.icon}><AiOutlineUserAdd /></div>\n        <span className={s.pageName}>\n          Registration page\n        </span>\n      </NavLink>\n      <NavLink to=\"/login\" exact className={s.link} activeStyle={s.activeLink}>\n        <div className={s.icon}><AiOutlineUserSwitch /></div>\n        <span className={s.pageName}>\n          Login page</span>\n      </NavLink>\n    </div>\n  );\n}","import { useSelector } from \"react-redux\";\nimport Navigation from \"../Navigation/Navigation\";\nimport UserMenu from '../UserMenu/UserMenu';\nimport AuthNav from '../AuthNav/AuthNav';\nimport { authSelectors } from \"../../redux/auth\";\nimport s from '../AppBar/AppBar.module.css'\n\nexport default function AppBar() {\n    const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\n    return (\n        <header className={s.header}>\n            <Navigation />\n            <div className={s.nav}>\n                {isLoggedIn ? <UserMenu /> : <AuthNav />}\n            </div>\n\n        </header>\n    )\n}","import { useSelector } from \"react-redux\";\nimport { Route, Redirect } from \"react-router-dom\";\nimport { authSelectors } from '../../redux/auth';\n\nexport default function PrivateRoute({\n    children,\n    redirectTo,\n    ...routeProps }) {\n    const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\n    return (\n        <Route {...routeProps}>\n            {isLoggedIn ? children : <Redirect to={redirectTo} />}\n        </Route>\n    );\n}","import React from 'react';\nimport { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { lazy, Suspense } from 'react';\nimport Loader from 'react-loader-spinner';\nimport { Switch, Redirect } from 'react-router-dom';\nimport { authOperations, authSelectors } from './redux/auth';\n\nimport s from './App.module.css';\nimport HomeView from './views/HomeView';\nimport AppBar from './components/AppBar';\nimport PrivateRoute from './components/PrivateRoute';\nimport PublicRoute from './components/RegistrationForm';\n\nconst RegisterView = lazy(() => import('./views/RegisterView' /* webpackChunkName: \"RegisterView\"*/),);\nconst LoginView = lazy(() => import('./views/LoginView' /* webpackChunkName: \"LoginView\"*/),);\nconst ContactsView = lazy(() => import('./views/ContactsView' /* webpackChunkName: \"ContactsView\"*/),);\n\n\nexport default function App() {\n    const dispatch = useDispatch();\n\n    const isFetchingCurrentUser = useSelector(authSelectors.getIsFetchingCurrentUser);\n\n    useEffect(() => {\n        dispatch(authOperations.fetchCurrentUser());\n    }, [dispatch]);\n\n    return (!isFetchingCurrentUser && (\n        <div className={s.App}>\n            <h1 className={s.header}>Phonebook</h1>\n            <AppBar />\n            <Suspense fallback={<Loader type=\"ThreeDots\" color=\"brown\" height={80} width={80} />}>\n                <Switch>\n                    <PublicRoute exact path=\"/\">\n                        <HomeView />\n                    </PublicRoute>\n\n                    <PublicRoute path=\"/register\" restricted redirectTo=\"/contacts\">\n                        <RegisterView />\n                    </PublicRoute>\n\n                    <PublicRoute path=\"/login\" restricted redirectTo=\"/contacts\">\n                        <LoginView />\n                    </PublicRoute>\n\n                    <PrivateRoute path=\"/contacts\" redirectTo=\"/login\">\n                        <ContactsView />\n                    </PrivateRoute>\n\n                    <PublicRoute>\n                        <Redirect to=\"/\" />\n                    </PublicRoute>\n                </Switch>\n            </Suspense>\n        </div>\n    ));\n}","// import { combineReducers, createStore } from 'redux';\n// import { composeWithDevTools } from 'redux-devtools-extension';\nimport { configureStore, getDefaultMiddleware } from '@reduxjs/toolkit';\nimport contactsReducer from './phonebook/contacts-reducer';\nimport { authReducer } from './auth';\nimport { logger } from 'redux-logger';\nimport {\n    persistStore, \n    persistReducer,\n    FLUSH,\n    REHYDRATE,\n    PAUSE,\n    PERSIST,\n    PURGE,\n    REGISTER, \n} from 'redux-persist';\nimport storage from 'redux-persist/lib/storage';\n\nconst middleware = [\n    ...getDefaultMiddleware({\n        serializableCheck: {\n            ignoredActions: [FLUSH, REHYDRATE, PAUSE, PERSIST, PURGE, REGISTER],\n        },\n    }), logger, \n];\n\n// const contactsPersistConfig = {\n//     key: 'contacts',\n//     storage,\n//     blacklist: ['filter'],\n// };\n// const rootReducer = combineReducers({\n//     contacts: contactsReducer,\n// });\n// const store = createStore(rootReducer, composeWithDevTools());\n\nconst authPersistConfig = {\n    key: 'auth',\n    storage,\n    whitelist: ['token'],\n};\n\nexport const store = configureStore({\n    reducer: {\n        auth: persistReducer(authPersistConfig, authReducer),\n        contacts: contactsReducer, \n    },\n    middleware,    \n    devTools: process.env.NODE_ENV === 'development',\n});\n\nexport const persistor = persistStore(store);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter } from 'react-router-dom';\nimport { PersistGate } from 'redux-persist/integration/react';\nimport { store, persistor } from './redux/store';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport 'modern-normalize/modern-normalize.css';\n\nReactDOM.render(\n    <React.StrictMode>\n        <Provider store={store}>\n            <PersistGate loading={<h3>Загружаем локальное хранилище</h3>} persistor={persistor}>\n                <BrowserRouter>\n                    <App />\n                </BrowserRouter>\n            </PersistGate>\n        </Provider>\n    </React.StrictMode>,\n    document.getElementById('root')\n);","import { createAction } from '@reduxjs/toolkit';\n\nexport const fetchContactRequest = createAction('contacts/fetchContactRequest');\nexport const fetchContactSuccess = createAction('contacts/fetchContactSuccess');\nexport const fetchContactError = createAction('contacts/fetchContactError');\n\nexport const addContactRequest = createAction('contacts/addContactRequest');\nexport const addContactSuccess = createAction('contacts/addContactSuccess');\nexport const addContactError = createAction('contacts/addContactError');\n\nexport const deleteContactRequest = createAction('contacts/deleteContactRequest');\nexport const deleteContactSuccess = createAction('contacts/deleteContactSuccess');\nexport const deleteContactError = createAction('contacts/deleteContactError');\n\nexport const updateContactRequest = createAction('contacts/updateContactRequest');\nexport const updateContactSuccess = createAction('contacts/updateContactSuccess');\nexport const updateContactError = createAction('contacts/updateContactError');\n\nexport const changeFilter = createAction('contscts/changeFilter');","// extracted by mini-css-extract-plugin\nmodule.exports = {\"registrationPage\":\"RegistrationForm_registrationPage__3HqrJ\",\"form\":\"RegistrationForm_form__3pm3J\",\"label\":\"RegistrationForm_label__7ahQx\",\"input\":\"RegistrationForm_input__fXotT\",\"registerButton\":\"RegistrationForm_registerButton__-CW8b\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"link\":\"AuthNav_link__Oa9gv\",\"icon\":\"AuthNav_icon__3XBqo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"navigation\":\"Navigation_navigation__6IJ7B\",\"link\":\"Navigation_link__6mHXt\",\"icon\":\"Navigation_icon__3GoiW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"userMenu\":\"UserMenu_userMenu__2wwwj\",\"email\":\"UserMenu_email__3iUol\",\"logOutButton\":\"UserMenu_logOutButton__2wGcr\",\"link\":\"UserMenu_link__3aYqG\",\"icon\":\"UserMenu_icon__2Oy7U\"};","import { useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { authOperations, authSelectors } from '../../redux/auth';\nimport s from '../RegistrationForm/RegistrationForm.module.css';\nimport { Card } from 'react-bootstrap';\n\nexport default function RegistrationForm() {\n  const dispatch = useDispatch();\n  const [name, setName] = useState('');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n\n  const handleChange = ({ target: { name, value } }) => {\n    switch (name) {\n      case 'name':\n        return setName(value);\n      case 'email':\n        return setEmail(value);\n      case 'password':\n        return setPassword(value);\n      default:\n        return;\n    }\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    dispatch(authOperations.register({ name, email, password }));\n    setName('');\n    setEmail('');\n    setPassword('');\n  };\n  const regError = useSelector(authSelectors.getRegError);\n\n  return (\n    <div className={s.registrationPage}>\n      <form className={s.form} method=\"post\" onSubmit={handleSubmit}>\n        <label className={s.label}>\n          Name\n          <input className={s.input} type=\"text\" placeholder=\"Enter name\" name=\"name\" value={name} onChange={handleChange} />\n        </label>\n        <label className={s.label}>\n          Email address\n          <input className={s.input} type=\"email\" placeholder=\"Enter email\" name=\"email\" value={email} onChange={handleChange} />\n        </label>\n        <label className={s.label}>\n          Password\n          <input className={s.input} type=\"password\" placeholder=\"Enter password\" name=\"password\" value={password} onChange={handleChange} />\n        </label>\n        <button type=\"submit\" className={s.registerButton}>\n          Registration\n        </button>\n      </form>\n\n      {regError && (\n        <Card\n          bg=\"warning\"\n          text=\"light\"\n          style={{ width: '18rem' }}\n          className=\"mb-2\"\n        >\n          <Card.Body>\n            <Card.Title> Error </Card.Title>\n            <Card.Text>\n              Wrong registration data. Try again with another data!\n            </Card.Text>\n          </Card.Body>\n        </Card>\n      )}\n    </div>\n  );\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__EyLZS\",\"App-logo\":\"App_App-logo__1vZJv\",\"App-logo-spin\":\"App_App-logo-spin__1s83I\",\"App-header\":\"App_App-header__1sjC0\",\"App-link\":\"App_App-link__cckys\",\"section\":\"App_section__261iD\",\"header\":\"App_header__3ePAn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"home\":\"HomeView_home__3NmZj\",\"heading\":\"HomeView_heading__MzFUP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"AppBar_header__3-SwI\"};","import { combineReducers } from \"redux\";\nimport { createReducer } from \"@reduxjs/toolkit\";\nimport * as actions from './contacts-actions';\n\nconst { fetchContactRequest, fetchContactSuccess, fetchContactError, addContactRequest, addContactSuccess, addContactError, deleteContactRequest, deleteContactSuccess, deleteContactError, updateContactRequest, updateContactSuccess, updateContactError, changeFilter } = actions;\n\nconst items = createReducer([], {\n    [fetchContactSuccess]: (_, { payload }) => payload,\n\n    [addContactSuccess]: (state, { payload }) => [...state, payload],\n\n    [deleteContactSuccess]: (state, { payload }) => state.filter(contact => contact.id !== payload),\n    \n    [updateContactSuccess]: (state, { payload }) => state.map(contact => contact.name === payload.name ? { ...contact, number: payload.number } : contact )\n});\n\nconst loading = createReducer(false, {\n    [fetchContactRequest]: () => true,\n    [fetchContactSuccess]: () => false,\n    [fetchContactError]: () => false,\n    [addContactRequest]: () => true,\n    [addContactSuccess]: () => false,\n    [addContactError]: () => false,\n    [deleteContactRequest]: () => true,\n    [deleteContactSuccess]: () => false,\n    [deleteContactError]: () => false,\n    [updateContactRequest]: () => true,\n    [updateContactSuccess]: () => false,\n    [updateContactError]: () => false,\n})\n           \nconst filter = createReducer('', {\n    [changeFilter]: (_, { payload }) => payload\n});\n\nconst error = createReducer(null, {\n    [fetchContactError]: (_, { payload }) => payload,\n    [addContactError]: (_, { payload }) => payload,\n    [deleteContactError]: (_, { payload }) => payload,\n    [updateContactError]: (_, { payload }) => payload,\n    [fetchContactRequest]: () => null,\n    [addContactRequest]: () => null,\n    [deleteContactRequest]: () => null,\n    [updateContactRequest]: () => null,\n  });\n\nexport default combineReducers({ items, loading, filter, error });","import axios from \"axios\";\nimport { createAsyncThunk } from \"@reduxjs/toolkit\";\n\naxios.defaults.baseURL = 'https://connections-api.herokuapp.com';\n\nconst token = {\n    set(token) {\n        axios.defaults.headers.common.Authorization = `Bearer ${token}`;\n    },\n    unset(token) {\n        axios.defaults.headers.common.Authorization = '';\n    },\n};\n\nconst register = createAsyncThunk('auth/register', async (credentials, thunkAPI) => {\n    try {\n        const { data } = await axios.post('/users/signup', credentials);\n        token.set(data.token);\n        return data;\n      } catch (error) {\n        return thunkAPI.rejectWithValue(error.message);\n      }\n});\n\nconst logIn = createAsyncThunk('auth/login', async (credentials, thunkAPI) => {\n    try {\n        const { data } = await axios.post('/users/login', credentials);\n        token.set(data.token);\n        return data;\n    } catch (error) {\n        return thunkAPI.rejectWithValue(error.message);\n    }\n});\n\nconst logOut = createAsyncThunk('auth/logout', async (_, thunkAPI) => {\n    try {\n      await axios.post('/users/logout');\n      token.unset();\n    } catch (error) {\n      return thunkAPI.rejectWithValue(error.message);\n    }\n  });\n  \n  const fetchCurrentUser = createAsyncThunk(\n    'auth/refresh',\n    async (_, thunkAPI) => {\n      const state = thunkAPI.getState();\n      const persistedToken = state.auth.token;\n  \n      if (persistedToken === null) {\n        return thunkAPI.rejectWithValue('None token');\n      }\n  \n      token.set(persistedToken);\n      try {\n        const { data } = await axios.get('/users/current');\n        return data;\n      } catch (error) {\n        return thunkAPI.rejectWithValue(error.message);\n      }\n    },\n  );\n  \n  const operations = {\n    register,\n    logOut,\n    logIn,\n    fetchCurrentUser,\n  };\n  export default operations;","const getIsLoggedIn = state => state.auth.isLoggedIn;\n\nconst getUserName = state => state.auth.user.name;\n\nconst getUserEmail = state => state.auth.user.email;\n\nconst getAuthError = state => state.auth.authError;\n\nconst getRegError = state => state.auth.regError;\n\nconst getIsFetchingCurrentUser = state => state.auth.isFetchingCurrentUser;\n\nconst authSelectors = {\n    getIsLoggedIn,\n    getUserName,\n    getUserEmail,\n    getIsFetchingCurrentUser,\n    getAuthError,\n    getRegError,\n};\nexport default authSelectors;","import { createSlice } from \"@reduxjs/toolkit\";\nimport authOperations from './auth-operations';\n\nconst initialState = {\n    user: { name: null, email: null },\n    token: null,\n    isLoggedIn: false, \n    isFetchingCurrentUser: false,\n    authError: null,\n    regError: null,\n};\n\nconst authSlice = createSlice({\n    name: 'auth',\n    initialState,\n    extraReducers: {\n        [authOperations.register.fulfilled](state, action) {\n            state.user = action.payload.user;\n            state.token = action.payload.token;\n            state.isLoggedIn = true;\n        },\n        [authOperations.register.rejected](state, action) {\n            state.regError = action.payload;\n        },\n\n        [authOperations.logIn.fulfilled](state, action) {\n            state.user = action.payload.user;\n            state.token = action.payload.token;\n            state.isLoggedIn = true;\n        },\n        [authOperations.logIn.rejected](state, action) {\n            state.authError = action.payload;\n          },\n\n        [authOperations.logOut.fulfilled](state) {\n            state.user = { name: null, email: null };\n            state.token = null;\n            state.isLoggedIn = false;\n        },\n\n        [authOperations.fetchCurrentUser.pending](state) {\n            state.isFetchingCurrentUser = true;\n          },\n        [authOperations.fetchCurrentUser.fulfilled](state, action) {\n            state.user = action.payload;\n            state.isLoggedIn = true;\n            state.isFetchingCurrentUser = false;\n        },\n        [authOperations.fetchCurrentUser.rejected](state) {\n            state.isFetchingCurrentUser = false;\n          },\n    },\n});\n\nexport default authSlice.reducer;"],"sourceRoot":""}